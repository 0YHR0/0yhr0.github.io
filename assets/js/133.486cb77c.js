(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{528:function(a,t,r){"use strict";r.r(t);var s=r(2),c=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"容器运行时"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器运行时"}},[a._v("#")]),a._v(" 容器运行时")]),a._v(" "),t("h2",{attrs:{id:"k8s的cri接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k8s的cri接口"}},[a._v("#")]),a._v(" K8s的CRI接口")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013132230522.png",alt:"image-20241013132230522"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013132244076.png",alt:"image-20241013132244076"}})]),a._v(" "),t("h2",{attrs:{id:"容器运行时实现原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器运行时实现原理"}},[a._v("#")]),a._v(" 容器运行时实现原理")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013132323988.png",alt:"image-20241013132323988"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013132451222.png",alt:"image-20241013132451222"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013132514637.png",alt:"image-20241013132514637"}})]),a._v(" "),t("h3",{attrs:{id:"k8s中runtimeclass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k8s中runtimeclass"}},[a._v("#")]),a._v(" K8s中RuntimeClass")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013132706333.png",alt:"image-20241013132706333"}})]),a._v(" "),t("h2",{attrs:{id:"业界主流运行时"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#业界主流运行时"}},[a._v("#")]),a._v(" 业界主流运行时")]),a._v(" "),t("h3",{attrs:{id:"runc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#runc"}},[a._v("#")]),a._v(" runc")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013132743004.png",alt:"image-20241013132743004"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013132751091.png",alt:"image-20241013132751091"}})]),a._v(" "),t("ul",[t("li",[a._v("右边是主机上的输出：\n"),t("ul",[t("li",[a._v("在主机上可以看到容器内的进程，如nginx")]),a._v(" "),t("li",[a._v("主机上可以看到限制给进程的内存大小，用超了就oom")]),a._v(" "),t("li",[a._v("主机上的capabilities全是1，代表有权限，但是容器进程会给他限制")])])])]),a._v(" "),t("h3",{attrs:{id:"kata"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kata"}},[a._v("#")]),a._v(" kata")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013133751006.png",alt:"image-20241013133751006"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013134058904.png",alt:"image-20241013134058904"}})]),a._v(" "),t("ul",[t("li",[a._v("crictl命令可以在主机上看到运行了哪些pod，因为不是都用的docker")]),a._v(" "),t("li",[a._v("在主机上看不到容器的进程，只能看到qemu虚拟机进程")]),a._v(" "),t("li",[a._v("因为是虚拟机实现，所以容器内外内核版本不一样，内核隔离，更加安全")]),a._v(" "),t("li",[a._v("内存：如果是runc实现，可以看到主机上所有的内存大小，但是kata只能看到自己能使用的内存大小")]),a._v(" "),t("li",[a._v("看到的CPU是虚拟的CPU")])]),a._v(" "),t("h3",{attrs:{id:"gvisor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gvisor"}},[a._v("#")]),a._v(" gVisor")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013134432416.png",alt:"image-20241013134432416"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013134703840.png",alt:"image-20241013134703840"}})]),a._v(" "),t("ul",[t("li",[a._v("也看不到真正用户的进程，因为藏在了sendbox里")]),a._v(" "),t("li",[a._v("内存也只能看到自己的")]),a._v(" "),t("li",[a._v("CPU也是虚拟化的cpu")]),a._v(" "),t("li",[a._v("内核也不一样，看到的是虚拟出来的内核")])]),a._v(" "),t("h2",{attrs:{id:"华为云中的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#华为云中的使用"}},[a._v("#")]),a._v(" 华为云中的使用")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013134929325.png",alt:"image-20241013134929325"}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013135015432.png",alt:"image-20241013135015432"}})]),a._v(" "),t("h1",{attrs:{id:"容器运行时技术发展方向"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器运行时技术发展方向"}},[a._v("#")]),a._v(" 容器运行时技术发展方向")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013135112877.png",alt:"image-20241013135112877"}})]),a._v(" "),t("h1",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://markdown-1301334775.cos.eu-frankfurt.myqcloud.com/image-20241013135302911.png",alt:"image-20241013135302911"}})])])}),[],!1,null,null,null);t.default=c.exports}}]);